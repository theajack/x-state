!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).experience={})}(this,function(e){"use strict";var re="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ie(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var t,n;(function(e){e.exports=function(){function r(e){var t=typeof e;return e!==null&&(t==="object"||t==="function")}function f(e){return typeof e==="function"}var e=void 0;if(Array.isArray)e=Array.isArray;else e=function(e){return Object.prototype.toString.call(e)==="[object Array]"};var n=e,i=0,t=void 0,o=void 0,s=function e(t,n){w[i]=t;w[i+1]=n;i+=2;if(i===2)if(o)o(g);else A()};function u(e){o=e}function c(e){s=e}var a=typeof window!=="undefined"?window:undefined,l=a||{},h=l.MutationObserver||l.WebKitMutationObserver,p=typeof self==="undefined"&&typeof process!=="undefined"&&{}.toString.call(process)==="[object process]",v=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function d(){return function(){return process.nextTick(g)}}function y(){if(typeof t!=="undefined")return function(){t(g)};return m()}function _(){var e=0;var t=new h(g);var n=document.createTextNode("");t.observe(n,{characterData:true});return function(){n.data=e=++e%2}}function b(){var e=new MessageChannel;e.port1.onmessage=g;return function(){return e.port2.postMessage(0)}}function m(){var e=setTimeout;return function(){return e(g,1)}}var w=new Array(1e3);function g(){for(var e=0;e<i;e+=2){var t=w[e];var n=w[e+1];t(n);w[e]=undefined;w[e+1]=undefined}i=0}function j(){try{var e=Function("return this")().require("vertx");t=e.runOnLoop||e.runOnContext;return y()}catch(e){return m()}}var A=void 0;if(p)A=d();else if(h)A=_();else if(v)A=b();else if(a===undefined&&typeof ie==="function")A=j();else A=m();function P(e,t){var n=this;var r=new this.constructor(E);if(r[T]===undefined)I(r);var i=n._state;if(i){var o=arguments[i-1];s(function(){return z(i,r,o,n._result)})}else U(n,r,e,t);return r}function S(e){var t=this;if(e&&typeof e==="object"&&e.constructor===t)return e;var n=new t(E);X(n,e);return n}var T=Math.random().toString(36).substring(2);function E(){}var O=void 0,x=1,M=2;function C(){return new TypeError("You cannot resolve a promise with itself")}function k(){return new TypeError("A promises callback cannot return that same promise.")}function F(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function Y(e,r,i){s(function(t){var n=false;var e=F(i,r,function(e){if(n)return;n=true;if(r!==e)X(t,e);else L(t,e)},function(e){if(n)return;n=true;N(t,e)},"Settle: "+(t._label||" unknown promise"));if(!n&&e){n=true;N(t,e)}},e)}function q(t,e){if(e._state===x)L(t,e._result);else if(e._state===M)N(t,e._result);else U(e,undefined,function(e){return X(t,e)},function(e){return N(t,e)})}function D(e,t,n){if(t.constructor===e.constructor&&n===P&&t.constructor.resolve===S)q(e,t);else if(n===undefined)L(e,t);else if(f(n))Y(e,t,n);else L(e,t)}function X(t,e){if(t===e)N(t,C());else if(r(e)){var n=void 0;try{n=e.then}catch(e){N(t,e);return}D(t,e,n)}else L(t,e)}function K(e){if(e._onerror)e._onerror(e._result);W(e)}function L(e,t){if(e._state!==O)return;e._result=t;e._state=x;if(e._subscribers.length!==0)s(W,e)}function N(e,t){if(e._state!==O)return;e._state=M;e._result=t;s(K,e)}function U(e,t,n,r){var i=e._subscribers;var o=i.length;e._onerror=null;i[o]=t;i[o+x]=n;i[o+M]=r;if(o===0&&e._state)s(W,e)}function W(e){var t=e._subscribers;var n=e._state;if(t.length===0)return;var r=void 0,i=void 0,o=e._result;for(var s=0;s<t.length;s+=3){r=t[s];i=t[s+n];if(r)z(n,r,i,o);else i(o)}e._subscribers.length=0}function z(e,t,n,r){var i=f(n),o=void 0,s=void 0,u=true;if(i){try{o=n(r)}catch(e){u=false;s=e}if(t===o){N(t,k());return}}else o=r;if(t._state!==O);else if(i&&u)X(t,o);else if(u===false)N(t,s);else if(e===x)L(t,o);else if(e===M)N(t,o)}function B(n,e){try{e(function e(t){X(n,t)},function e(t){N(n,t)})}catch(e){N(n,e)}}var G=0;function H(){return G++}function I(e){e[T]=G++;e._state=undefined;e._result=undefined;e._subscribers=[]}function J(){return new Error("Array Methods must be provided an Array")}var Q=function(){function e(e,t){this._instanceConstructor=e;this.promise=new e(E);if(!this.promise[T])I(this.promise);if(n(t)){this.length=t.length;this._remaining=t.length;this._result=new Array(this.length);if(this.length===0)L(this.promise,this._result);else{this.length=this.length||0;this._enumerate(t);if(this._remaining===0)L(this.promise,this._result)}}else N(this.promise,J())}e.prototype._enumerate=function e(t){for(var n=0;this._state===O&&n<t.length;n++)this._eachEntry(t[n],n)};e.prototype._eachEntry=function e(t,n){var r=this._instanceConstructor;var i=r.resolve;if(i===S){var o=void 0;var s=void 0;var u=false;try{o=t.then}catch(e){u=true;s=e}if(o===P&&t._state!==O)this._settledAt(t._state,n,t._result);else if(typeof o!=="function"){this._remaining--;this._result[n]=t}else if(r===te){var f=new r(E);if(u)N(f,s);else D(f,t,o);this._willSettleAt(f,n)}else this._willSettleAt(new r(function(e){return e(t)}),n)}else this._willSettleAt(i(t),n)};e.prototype._settledAt=function e(t,n,r){var i=this.promise;if(i._state===O){this._remaining--;if(t===M)N(i,r);else this._result[n]=r}if(this._remaining===0)L(i,this._result)};e.prototype._willSettleAt=function e(t,n){var r=this;U(t,undefined,function(e){return r._settledAt(x,n,e)},function(e){return r._settledAt(M,n,e)})};return e}();function R(e){return new Q(this,e).promise}function V(i){var o=this;if(n(i))return new o(function(e,t){for(var n=i.length,r=0;r<n;r++)o.resolve(i[r]).then(e,t)});else return new o(function(e,t){return t(new TypeError("You must pass an array to race."))})}function Z(e){var t=new this(E);return N(t,e),t}function $(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ee(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var te=function(){function t(e){this[T]=H();this._result=this._state=undefined;this._subscribers=[];if(E!==e){typeof e!=="function"&&$();this instanceof t?B(this,e):ee()}}t.prototype.catch=function e(t){return this.then(null,t)};t.prototype.finally=function e(t){var n=this;var r=n.constructor;if(f(t))return n.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})});return n.then(t,t)};return t}();function ne(){var e=void 0;if(void 0!==re)e=re;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=te}return te.prototype.then=P,te.all=function(e){return new Q(this,e).promise},te.race=function(i){var o=this;return n(i)?new o(function(e,t){for(var n=i.length,r=0;r<n;r++)o.resolve(i[r]).then(e,t)}):new o(function(e,t){return t(new TypeError("You must pass an array to race."))})},te.resolve=S,te.reject=function(e){var t=new this(E);return N(t,e),t},te._setScheduler=function(e){o=e},te._setAsap=function(e){s=e},te._asap=s,te.polyfill=function(){var e=void 0;if(void 0!==re)e=re;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=te},te.Promise=te}()}(n={path:t,exports:{},require:function(e,t){return ie(null==t&&n.path)}},n.exports),n.exports).polyfill();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){console.warn(e)}function o(o,s,e){var t,n={};for(t in s)!function(i){n[i]=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=s[i]).call.apply(e,[o].concat(n))}}(t);o[e]=n}var i=function(){function i(e){var t=e.state,n=e.commit,r=e.dispatch,e=e.getters;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t){var n,r={};for(n in t)!function(e){r[e]={get:function(){return t[e]},set:function(){s("不能直接对state赋值")}}}(n);var i={};Object.defineProperties(i,r),Object.defineProperty(e,"state",{get:function(){return i},set:function(){s("不能直接对state赋值")}})}(this,t),o(this,n,"commit"),o(this,r,"dispatch"),function(t,n,r){var e,i={};for(e in n)!function(e){i[e]={get:function(){return n[e].call(t,r)},set:function(){s("不能直接对getters赋值")}}}(e);var o={};Object.defineProperties(o,i),Object.defineProperty(t,"getters",{get:function(){return o},set:function(){s("不能直接对getters赋值")}})}(this,e,t)}var e,t,n;return e=i,(t=[{key:"regist",value:function(){}}])&&r(e.prototype,t),n&&r(e,n),i}();e.XState=i,e.buildXState=function(e){return new i(e)},Object.defineProperty(e,"__esModule",{value:!0})});
